# Celebration

기념일(생일, 결혼기념일, 발렌타인데이 등)에 상대방에게 링크로 메시지를 전달하는 서비스입니다.

## 개발 환경
- Gradle Wrapper: **7.6** (`./gradlew`)
- JDK: **17** 권장 (Gradle 7.6 실행/빌드 호환)


## 1차 실행 계획 (MVP)

### 1) 서비스 범위
- 링크 기반 메시지 전달
- 메시지 구성 요소: 텍스트, 이미지, 음성
- 템플릿 기반 메시지 작성
- 기술 스택: Java + Spring Boot(백엔드), Vue.js(프론트엔드)

### 2) 핵심 기능
#### 작성자
- 기념일 선택(기본 + 사용자 정의)
- 메시지 작성(텍스트/이미지/음성)
- 템플릿 선택
- 공유 링크 발급

#### 수신자
- 링크 접속 후 메시지 열람
- 음성 재생, 이미지 확인
- 모바일/데스크톱 반응형 UI

### 3) 우선 정책 결정사항 (반영 완료)
1. **비회원도 작성 가능**
2. **링크 만료 시간 안에서는 수정 가능**
3. **링크 만료 기본값: 7일(일주일)**
4. **최대 업로드 용량(초기 최소 정책)**
   - 이미지: 파일당 3MB, 최대 3장
   - 음성: 파일당 5MB, 최대 1개
   - 총 업로드 합계: 14MB 이내
   - 추후 결제 플랜 도입 시 용량 차등 적용
5. **템플릿 1차 제공 개수: 3개**

### 4) 백엔드 구현 우선순위
1. 메시지 생성/수정/조회 API
2. 공개 링크 토큰 생성 및 만료 처리
3. 이미지/음성 업로드 API와 용량 검증
4. 만료 전 수정 가능 정책 적용

### 5) 프론트엔드 구현 우선순위
1. 메시지 작성 화면
2. 템플릿 3종 선택 UI
3. 링크 열람 화면
4. 업로드 용량 초과 안내 UX

### 6) 다음 단계 (초안 문서 작성 완료)
- API 명세서 초안: `docs/api-spec.md`
- DB ERD 초안: `docs/erd.md`
- 템플릿 3종 와이어프레임: `docs/wireframes.md`

## 실행 계획 기반 진행 현황 (이번 작업)

### 완료
- Spring Boot 기반 MVP API 골격 구현
  - 메시지 생성 `POST /api/v1/messages` (multipart)
  - 메시지 수정 `PUT /api/v1/messages/{messageId}` (`X-Edit-Token` 인증)
  - 공개 조회 `GET /api/v1/messages/public/{publicToken}`
  - 이미지 추가 `POST /api/v1/messages/{messageId}/images`
  - 음성 업로드/교체 `POST /api/v1/messages/{messageId}/voice`
- 정책 반영
  - 비회원 작성 모델
  - 기본 만료 7일
  - 만료 이후 수정 차단 (`MESSAGE_EXPIRED`)
  - 공개 링크 만료 시 `LINK_EXPIRED` 반환
  - 업로드 제한 검증(이미지 3MB/3장, 음성 5MB/1개, 총합 14MB)
- 공통 에러 포맷 및 코드 매핑
- 통합 테스트(생성/조회, 토큰 인증 실패, 음성 용량 초과) 작성
- JPA + H2 기반 영속 저장소 연동 (in-memory 저장소 제거)
- 프론트엔드 MVP 화면 추가 (Spring static)
  - 메시지 작성 폼(기념일/본문/템플릿/미디어 업로드)
  - 업로드 제한 사전 검증 UX(3MB/5MB/14MB)
  - 생성 결과(공유링크·토큰) 즉시 확인
  - 공개 토큰 조회 및 템플릿별 미리보기 렌더링

### 다음 단계
- 파일 저장소(S3/로컬) 연동
- 링크 조회수/열람 이벤트 추적
- 템플릿/기념일 마스터 데이터 관리 API
